{"ast":null,"code":"import { EventEmitter, forwardRef } from '@angular/core';\nimport { NG_VALUE_ACCESSOR, FormControl } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { takeUntil, distinctUntilChanged, startWith, map, filter } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/material/autocomplete\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/core\";\nimport * as i5 from \"./pipes/highlight.pipe\";\n\nfunction AutocompleteComponent_mat_option_5_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelement(1, \"span\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const option_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", option_r3.icon.cssClass);\n  }\n}\n\nfunction AutocompleteComponent_mat_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 6)(1, \"div\", 7);\n    i0.ɵɵtemplate(2, AutocompleteComponent_mat_option_5_div_2_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelement(3, \"div\", 9);\n    i0.ɵɵpipe(4, \"highlight\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const option_r3 = ctx.$implicit;\n    i0.ɵɵnextContext();\n\n    const _r0 = i0.ɵɵreference(2);\n\n    i0.ɵɵproperty(\"value\", option_r3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", option_r3.icon);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind2(4, 3, option_r3.label, _r0.value), i0.ɵɵsanitizeHtml);\n  }\n}\n\nexport class AutocompleteComponent {\n  constructor() {\n    this.changed = new EventEmitter();\n    this.formControl = new FormControl();\n    this.destroy = new Subject();\n\n    this.propagateChange = () => {};\n\n    this.propagateTouched = () => {};\n  }\n\n  ngOnInit() {\n    this.options$ = this.formControl.valueChanges.pipe(startWith(''), filter(value => typeof value === 'string' || typeof value === 'object'), map(value => typeof value === 'string' ? value : value.label), map(label => label ? this.filter(label) : this.items.slice()));\n    this.formControl.valueChanges.pipe(takeUntil(this.destroy), distinctUntilChanged()).subscribe(item => {\n      const value = typeof item === 'object' ? item.value : null;\n      this.propagateChange(value);\n      this.changed.emit(value);\n    });\n  }\n\n  ngOnDestroy() {\n    this.destroy.next(this.options$);\n    this.destroy.complete();\n  }\n\n  filter(value) {\n    const filterValue = value.toLowerCase();\n    return this.items.filter(item => item.label.toLowerCase().includes(filterValue));\n  }\n\n  writeValue(value) {\n    const selectedOption = this.items.find(item => item.value === value);\n    this.formControl.setValue(selectedOption);\n  }\n\n  registerOnChange(fn) {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn) {\n    this.propagateTouched = fn;\n  }\n\n  setDisabledState(isDisabled) {\n    if (isDisabled) {\n      this.formControl.disable();\n    } else {\n      this.formControl.enable();\n    }\n  }\n\n  displayFn(item) {\n    return item ? item.label : '';\n  }\n\n  onBlur() {\n    this.propagateTouched();\n  }\n\n}\n\nAutocompleteComponent.ɵfac = function AutocompleteComponent_Factory(t) {\n  return new (t || AutocompleteComponent)();\n};\n\nAutocompleteComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AutocompleteComponent,\n  selectors: [[\"app-autocomplete\"]],\n  inputs: {\n    items: \"items\",\n    placeholder: \"placeholder\"\n  },\n  outputs: {\n    changed: \"changed\"\n  },\n  features: [i0.ɵɵProvidersFeature([{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => AutocompleteComponent),\n    multi: true\n  }])],\n  decls: 7,\n  vars: 7,\n  consts: [[1, \"autocomplete\"], [\"type\", \"text\", 1, \"app-input\", 3, \"placeholder\", \"formControl\", \"matAutocomplete\", \"blur\"], [\"search\", \"\"], [3, \"displayWith\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"option\"], [\"class\", \"option__icon\", 4, \"ngIf\"], [1, \"option__label\", 3, \"innerHTML\"], [1, \"option__icon\"], [3, \"ngClass\"]],\n  template: function AutocompleteComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"input\", 1, 2);\n      i0.ɵɵlistener(\"blur\", function AutocompleteComponent_Template_input_blur_1_listener() {\n        return ctx.onBlur();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"mat-autocomplete\", 3, 4);\n      i0.ɵɵtemplate(5, AutocompleteComponent_mat_option_5_Template, 5, 6, \"mat-option\", 5);\n      i0.ɵɵpipe(6, \"async\");\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(4);\n\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"placeholder\", ctx.placeholder || \"Pick one\")(\"formControl\", ctx.formControl)(\"matAutocomplete\", _r1);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"displayWith\", ctx.displayFn);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(6, 5, ctx.options$));\n    }\n  },\n  directives: [i1.DefaultValueAccessor, i2.MatAutocompleteTrigger, i1.NgControlStatus, i1.FormControlDirective, i2.MatAutocomplete, i3.NgForOf, i4.MatOption, i3.NgIf, i3.NgClass],\n  pipes: [i3.AsyncPipe, i5.HighlightPipe],\n  styles: [\".autocomplete[_ngcontent-%COMP%] {\\n  position: relative;\\n}\\n.autocomplete__options[_ngcontent-%COMP%] {\\n  position: absolute;\\n}\\n.option[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n}\\n.option__icon[_ngcontent-%COMP%] {\\n  width: 30px;\\n  height: 30px;\\n  display: flex;\\n  align-items: center;\\n}\\n.form-field_error[_nghost-%COMP%]   input[_ngcontent-%COMP%], .form-field_error   [_nghost-%COMP%]   input[_ngcontent-%COMP%] {\\n  border: 1px solid #B00020;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dG9jb21wbGV0ZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNJLGtCQUFBO0FBREo7QUFHSTtFQUNJLGtCQUFBO0FBRFI7QUFLQTtFQUNJLGFBQUE7RUFDQSxtQkFBQTtBQUZKO0FBSUk7RUFDSSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtBQUZSO0FBT0k7RUFDRSx5QkFBQTtBQUpOIiwiZmlsZSI6ImF1dG9jb21wbGV0ZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJzdHlsZXMvY29sb3JzXCI7XG5cbi5hdXRvY29tcGxldGUge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICAgICZfX29wdGlvbnMge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgfSAgXG59XG5cbi5vcHRpb24ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAgICZfX2ljb24ge1xuICAgICAgICB3aWR0aDogMzBweDtcbiAgICAgICAgaGVpZ2h0OiAzMHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIH1cbn1cblxuOmhvc3QtY29udGV4dCguZm9ybS1maWVsZF9lcnJvcikge1xuICAgIGlucHV0IHtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICRlcnJvcjtcbiAgICB9XG59Il19 */\"]\n});","map":{"version":3,"sources":["/Users/laura/DEV/forms/src/app/shared/controls/autocomplete/autocomplete.component.ts"],"names":["EventEmitter","forwardRef","NG_VALUE_ACCESSOR","FormControl","Subject","takeUntil","distinctUntilChanged","startWith","map","filter","i0","i1","i2","i3","i4","i5","AutocompleteComponent_mat_option_5_div_2_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","option_r3","ɵɵnextContext","$implicit","ɵɵadvance","ɵɵproperty","icon","cssClass","AutocompleteComponent_mat_option_5_Template","ɵɵtemplate","ɵɵpipe","_r0","ɵɵreference","ɵɵpipeBind2","label","value","ɵɵsanitizeHtml","AutocompleteComponent","constructor","changed","formControl","destroy","propagateChange","propagateTouched","ngOnInit","options$","valueChanges","pipe","items","slice","subscribe","item","emit","ngOnDestroy","next","complete","filterValue","toLowerCase","includes","writeValue","selectedOption","find","setValue","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","disable","enable","displayFn","onBlur","ɵfac","AutocompleteComponent_Factory","t","ɵcmp","ɵɵdefineComponent","type","selectors","inputs","placeholder","outputs","features","ɵɵProvidersFeature","provide","useExisting","multi","decls","vars","consts","template","AutocompleteComponent_Template","ɵɵlistener","AutocompleteComponent_Template_input_blur_1_listener","_r1","ɵɵpipeBind1","directives","DefaultValueAccessor","MatAutocompleteTrigger","NgControlStatus","FormControlDirective","MatAutocomplete","NgForOf","MatOption","NgIf","NgClass","pipes","AsyncPipe","HighlightPipe","styles"],"mappings":"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","sourcesContent":["import { EventEmitter, forwardRef } from '@angular/core';\nimport { NG_VALUE_ACCESSOR, FormControl } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { takeUntil, distinctUntilChanged, startWith, map, filter } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/material/autocomplete\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/core\";\nimport * as i5 from \"./pipes/highlight.pipe\";\nfunction AutocompleteComponent_mat_option_5_div_2_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelement(1, \"span\", 11);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const option_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", option_r3.icon.cssClass);\n} }\nfunction AutocompleteComponent_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 6)(1, \"div\", 7);\n    i0.ɵɵtemplate(2, AutocompleteComponent_mat_option_5_div_2_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelement(3, \"div\", 9);\n    i0.ɵɵpipe(4, \"highlight\");\n    i0.ɵɵelementEnd()();\n} if (rf & 2) {\n    const option_r3 = ctx.$implicit;\n    i0.ɵɵnextContext();\n    const _r0 = i0.ɵɵreference(2);\n    i0.ɵɵproperty(\"value\", option_r3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", option_r3.icon);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind2(4, 3, option_r3.label, _r0.value), i0.ɵɵsanitizeHtml);\n} }\nexport class AutocompleteComponent {\n    constructor() {\n        this.changed = new EventEmitter();\n        this.formControl = new FormControl();\n        this.destroy = new Subject();\n        this.propagateChange = () => { };\n        this.propagateTouched = () => { };\n    }\n    ngOnInit() {\n        this.options$ = this.formControl.valueChanges.pipe(startWith(''), filter(value => typeof value === 'string' || typeof value === 'object'), map(value => typeof value === 'string' ? value : value.label), map(label => label ? this.filter(label) : this.items.slice()));\n        this.formControl.valueChanges.pipe(takeUntil(this.destroy), distinctUntilChanged()).subscribe(item => {\n            const value = typeof item === 'object' ? item.value : null;\n            this.propagateChange(value);\n            this.changed.emit(value);\n        });\n    }\n    ngOnDestroy() {\n        this.destroy.next(this.options$);\n        this.destroy.complete();\n    }\n    filter(value) {\n        const filterValue = value.toLowerCase();\n        return this.items.filter(item => item.label.toLowerCase().includes(filterValue));\n    }\n    writeValue(value) {\n        const selectedOption = this.items.find(item => item.value === value);\n        this.formControl.setValue(selectedOption);\n    }\n    registerOnChange(fn) {\n        this.propagateChange = fn;\n    }\n    registerOnTouched(fn) {\n        this.propagateTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n        if (isDisabled) {\n            this.formControl.disable();\n        }\n        else {\n            this.formControl.enable();\n        }\n    }\n    displayFn(item) {\n        return item ? item.label : '';\n    }\n    onBlur() {\n        this.propagateTouched();\n    }\n}\nAutocompleteComponent.ɵfac = function AutocompleteComponent_Factory(t) { return new (t || AutocompleteComponent)(); };\nAutocompleteComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: AutocompleteComponent, selectors: [[\"app-autocomplete\"]], inputs: { items: \"items\", placeholder: \"placeholder\" }, outputs: { changed: \"changed\" }, features: [i0.ɵɵProvidersFeature([\n            {\n                provide: NG_VALUE_ACCESSOR,\n                useExisting: forwardRef(() => AutocompleteComponent),\n                multi: true\n            }\n        ])], decls: 7, vars: 7, consts: [[1, \"autocomplete\"], [\"type\", \"text\", 1, \"app-input\", 3, \"placeholder\", \"formControl\", \"matAutocomplete\", \"blur\"], [\"search\", \"\"], [3, \"displayWith\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"option\"], [\"class\", \"option__icon\", 4, \"ngIf\"], [1, \"option__label\", 3, \"innerHTML\"], [1, \"option__icon\"], [3, \"ngClass\"]], template: function AutocompleteComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"input\", 1, 2);\n        i0.ɵɵlistener(\"blur\", function AutocompleteComponent_Template_input_blur_1_listener() { return ctx.onBlur(); });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"mat-autocomplete\", 3, 4);\n        i0.ɵɵtemplate(5, AutocompleteComponent_mat_option_5_Template, 5, 6, \"mat-option\", 5);\n        i0.ɵɵpipe(6, \"async\");\n        i0.ɵɵelementEnd()();\n    } if (rf & 2) {\n        const _r1 = i0.ɵɵreference(4);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"placeholder\", ctx.placeholder || \"Pick one\")(\"formControl\", ctx.formControl)(\"matAutocomplete\", _r1);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"displayWith\", ctx.displayFn);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(6, 5, ctx.options$));\n    } }, directives: [i1.DefaultValueAccessor, i2.MatAutocompleteTrigger, i1.NgControlStatus, i1.FormControlDirective, i2.MatAutocomplete, i3.NgForOf, i4.MatOption, i3.NgIf, i3.NgClass], pipes: [i3.AsyncPipe, i5.HighlightPipe], styles: [\".autocomplete[_ngcontent-%COMP%] {\\n  position: relative;\\n}\\n.autocomplete__options[_ngcontent-%COMP%] {\\n  position: absolute;\\n}\\n.option[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n}\\n.option__icon[_ngcontent-%COMP%] {\\n  width: 30px;\\n  height: 30px;\\n  display: flex;\\n  align-items: center;\\n}\\n.form-field_error[_nghost-%COMP%]   input[_ngcontent-%COMP%], .form-field_error   [_nghost-%COMP%]   input[_ngcontent-%COMP%] {\\n  border: 1px solid #B00020;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dG9jb21wbGV0ZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNJLGtCQUFBO0FBREo7QUFHSTtFQUNJLGtCQUFBO0FBRFI7QUFLQTtFQUNJLGFBQUE7RUFDQSxtQkFBQTtBQUZKO0FBSUk7RUFDSSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtBQUZSO0FBT0k7RUFDRSx5QkFBQTtBQUpOIiwiZmlsZSI6ImF1dG9jb21wbGV0ZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJzdHlsZXMvY29sb3JzXCI7XG5cbi5hdXRvY29tcGxldGUge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICAgICZfX29wdGlvbnMge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgfSAgXG59XG5cbi5vcHRpb24ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAgICZfX2ljb24ge1xuICAgICAgICB3aWR0aDogMzBweDtcbiAgICAgICAgaGVpZ2h0OiAzMHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIH1cbn1cblxuOmhvc3QtY29udGV4dCguZm9ybS1maWVsZF9lcnJvcikge1xuICAgIGlucHV0IHtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICRlcnJvcjtcbiAgICB9XG59Il19 */\"] });\n"]},"metadata":{},"sourceType":"module"}